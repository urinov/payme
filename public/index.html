<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <title>To‘lov test</title>
</head>
<body>
  <h1>To‘lov test sahifasi</h1>

  <button onclick="startPayme()">Payme bilan to‘lov</button>
  <button onclick="startClick()">Click bilan to‘lov</button>

  <script>
  async function createOrder() {
    const resp = await fetch('/api/new-order');
    const data = await resp.json();
    return data.order_id;
  }

  async function startPayme() {
    const orderId = await createOrder();
    const resp = await fetch(`/api/checkout-url?order_id=${orderId}&amount=1100000`);
    const data = await resp.json();
    window.location.href = data.url;
  }

  async function startClick() {
    const orderId = await createOrder();
    const resp = await fetch(`/api/click-url?order_id=${orderId}&amount=1100000`);
    const data = await resp.json();
    window.location.href = data.url;
  }
</script>

</body>
</html>
